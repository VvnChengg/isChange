FROM node:18-alpine

WORKDIR /app/backend

COPY backend/ /app/backend/

RUN npm install

ENV PORT=${PORT}
ENV MONGODB_URL=${MONGODB_URL}
ENV NODEMAILER_USER=${NODEMAILER_USER}
ENV NODEMAILER_PASSWORD=${NODEMAILER_PASSWORD}
ENV JWT_SECRET_KEY=${JWT_SECRET_KEY}
ENV GOOGLE_MAP_API_KEY=${GOOGLE_MAP_API_KEY}
ENV SOCKET_PORT=${SOCKET_PORT}
ENV CLIENT_PORT=${CLIENT_PORT}
ENV CORS_ORIGIN=${CORS_ORIGIN}

EXPOSE ${PORT}
EXPOSE ${SOCKET_PORT}

CMD ["npm", "start"]